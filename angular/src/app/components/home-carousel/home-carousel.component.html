<!-- custom-carousel.component.html -->
<div
  class="relative overflow-hidden"
  (mouseenter)="stopAutoRotation()"
  (mouseleave)="startAutoRotation()"
  (touchstart)="onTouchStart($event)"
  (touchend)="onTouchEnd($event)"
>
  <!-- Navigation Buttons -->
  <button
    class="absolute top-1/2 left-4 z-10 -translate-y-1/2 bg-white/70 text-gray-800 rounded-full w-10 h-10 flex items-center justify-center shadow-md hover:bg-white/90 transition-all"
    (click)="prev()"
  >
    &lt;
  </button>

  <button
    class="absolute top-1/2 right-4 z-10 -translate-y-1/2 bg-white/70 text-gray-800 rounded-full w-10 h-10 flex items-center justify-center shadow-md hover:bg-white/90 transition-all"
    (click)="next()"
  >
    &gt;
  </button>

  <!-- Carousel Track -->
  <div class="relative h-80 overflow-hidden">
    <div
      class="flex h-full transition-transform duration-500 ease-in-out"
      [style.transform]="'translateX(-' + currentIndex * (100 / visibleItems) + '%)'"
    >
      <!-- Property Cards -->
      <div
        *ngFor="let property of items"
        class="flex-shrink-0 w-full px-2"
        [ngClass]="{
          'md:w-1/2': visibleItems >= 2,
          'lg:w-1/3': visibleItems >= 3,
          'xl:w-1/4': visibleItems >= 4
        }"
      >
        <div
          class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg
          transition-shadow duration-300 h-full flex flex-col mx-auto"
          style="max-width: 95%;"
        >
          <!-- Property Image with Badge -->
          <div class="relative flex-grow-0">
            <span
              class="absolute top-3 left-3 text-white py-1 rounded text-2xl
              font-medium shadow-sm"
              [ngClass]="{
                'bg-green-100 text-green-800': property.governorateName === 'Sale',
                'bg-blue-100 text-blue-800': property.governorateName === 'Rent'
              }"
            >
              {{ property.governorateName || 'London' }}
            </span>
            <img
              [src]="property.mainImage || defaultImage"
              [alt]="property.governorateName || property.governorateName"
              class="w-full h-48 object-cover"
            />
          </div>

          <div class="flex justify-between items-center p-4 mt-auto">
            <button
              class="py-1 px-3 md:px-4 md:py-2 bg-white/90 text-gray-800 rounded-md hover:bg-gray-300 text-sm transition-colors cursor-pointer"
              (click)="viewProperty(property)"
            >
              <div class="flex items-center space-x-2">
                View Home
                <ng-icon name="arrowRightIcon" size="16px" color="white" />
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
